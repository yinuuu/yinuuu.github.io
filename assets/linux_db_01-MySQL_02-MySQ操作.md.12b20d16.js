import{_ as s,c as a,o as n,a as l}from"./app.2918728e.js";const D=JSON.parse('{"title":"MySQL基础操作","description":"","frontmatter":{"title":"MySQL基础操作","author":"yinuuu","date":"2023/01/01","categories":["MySQL"],"tags":["MySQL"]},"headers":[{"level":3,"title":"一、命令行","slug":"一、命令行","link":"#一、命令行","children":[]},{"level":3,"title":"二、SQL","slug":"二、sql","link":"#二、sql","children":[]},{"level":3,"title":"三、DDL","slug":"三、ddl","link":"#三、ddl","children":[]},{"level":3,"title":"四、DML","slug":"四、dml","link":"#四、dml","children":[]},{"level":3,"title":"五、DQL","slug":"五、dql","link":"#五、dql","children":[]},{"level":3,"title":"六、DCL","slug":"六、dcl","link":"#六、dcl","children":[]},{"level":3,"title":"七、数据库设计","slug":"七、数据库设计","link":"#七、数据库设计","children":[]},{"level":3,"title":"八、事务","slug":"八、事务","link":"#八、事务","children":[]}],"relativePath":"linux/db/01-MySQL/02-MySQ操作.md","lastUpdated":1677165673000}'),p={name:"linux/db/01-MySQL/02-MySQ操作.md"},o=l(`<h3 id="一、命令行" tabindex="-1">一、命令行 <a class="header-anchor" href="#一、命令行" aria-hidden="true">#</a></h3><h4 id="_1、登录命令" tabindex="-1">1、登录命令 <a class="header-anchor" href="#_1、登录命令" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 本地登录</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-proot</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 明文</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 密文</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 允许远程登录</span></span>
<span class="line"><span style="color:#FFCB6B;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Host=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Password=PASSWORD</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">WHERE User=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 生效</span></span>
<span class="line"><span style="color:#FFCB6B;">flush</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">privileges</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 远程登录</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-hip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-proot</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--host=ip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--user=root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--password=root</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 本地登录</span></span>
<span class="line"><span style="color:#ABB2BF;">mysql </span><span style="color:#D19A66;">-uroot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-proot</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 明文</span></span>
<span class="line"><span style="color:#ABB2BF;">mysql </span><span style="color:#D19A66;">-uroot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 密文</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 允许远程登录</span></span>
<span class="line"><span style="color:#ABB2BF;">update </span><span style="color:#98C379;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Host=&quot;%&quot;,</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Password=PASSWORD</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;123456&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#98C379;">WHERE User=&quot;root&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 生效</span></span>
<span class="line"><span style="color:#ABB2BF;">flush </span><span style="color:#98C379;">privileges</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 远程登录</span></span>
<span class="line"><span style="color:#ABB2BF;">mysql </span><span style="color:#D19A66;">-hip</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-uroot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-proot</span></span>
<span class="line"><span style="color:#ABB2BF;">mysql </span><span style="color:#D19A66;">--host=ip</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--user=root</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--password=root</span></span>
<span class="line"></span></code></pre></div><h4 id="_2、退出" tabindex="-1">2、退出 <a class="header-anchor" href="#_2、退出" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 退出</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"><span style="color:#FFCB6B;">quit</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 退出</span></span>
<span class="line"><span style="color:#56B6C2;">exit</span></span>
<span class="line"><span style="color:#ABB2BF;">quit</span></span>
<span class="line"></span></code></pre></div><h4 id="_3、备份和还原" tabindex="-1">3、备份和还原 <a class="header-anchor" href="#_3、备份和还原" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 备份</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-proot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--default-character-set=utf8</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">databaseName</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pathName</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 还原</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 1、登录数据库</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2、创建数据库</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3、使用数据库</span></span>
<span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pathName/file</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 备份</span></span>
<span class="line"><span style="color:#ABB2BF;">mysqldump </span><span style="color:#D19A66;">-uroot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-proot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--default-character-set=utf8</span><span style="color:#ABB2BF;"> [databaseName] &gt; [pathName]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 还原</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 1、登录数据库</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 2、创建数据库</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 3、使用数据库</span></span>
<span class="line"><span style="color:#56B6C2;">source</span><span style="color:#ABB2BF;"> [pathName/file]</span></span>
<span class="line"></span></code></pre></div><h3 id="二、sql" tabindex="-1">二、SQL <a class="header-anchor" href="#二、sql" aria-hidden="true">#</a></h3><h4 id="_1、什么是sql" tabindex="-1">1、什么是SQL？ <a class="header-anchor" href="#_1、什么是sql" aria-hidden="true">#</a></h4><p>Structured Query Language 结构化查询语言。</p><p><strong>作用：</strong></p><ul><li>是一种所有关系型数据库的查询规范，不同的数据库都支持。</li><li>每一种数据库操作的方式存在不一样的地方，称为“方言”。</li><li>通用的数据库操作语言，可以用在不同的数据库中。</li></ul><h4 id="_2、语法规范" tabindex="-1">2、语法规范 <a class="header-anchor" href="#_2、语法规范" aria-hidden="true">#</a></h4><ul><li>SQL语句可以单行或多行书写，以分号结尾。</li><li>MySQL数据库不区分大小写，关键字建议使用大写。</li><li>注释 <ul><li>单行注释：-- 或 #</li><li>多行注解：/**/</li></ul></li></ul><h4 id="_3、sql分类" tabindex="-1">3、SQL分类 <a class="header-anchor" href="#_3、sql分类" aria-hidden="true">#</a></h4><ul><li>DDL（Data Definition Language）数据库定义语言： <ul><li>用来定义数据库对象：数据库、表、字段等。关键字：create、drop、alter等。</li></ul></li><li>DML（Data Manipulation Language）数据库操作语言： <ul><li>用来对数据库中表的数据进行增删改。关键字：insert、delete、update等。</li></ul></li><li>DQL（Data Query Language）数据库查询语言： <ul><li>用来查询数据库中表的记录（数据）。关键字：select、where等。</li></ul></li><li>DCL（Data Control Language）数据库控制语言： <ul><li>用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT、REVOKE等。</li></ul></li></ul><h3 id="三、ddl" tabindex="-1">三、DDL <a class="header-anchor" href="#三、ddl" aria-hidden="true">#</a></h3><h4 id="_1、操作数据库" tabindex="-1">1、操作数据库 <a class="header-anchor" href="#_1、操作数据库" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、创建（Create）</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 创建数据库</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">exists</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 不存在则创建</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> [databaseName] </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8md4; </span><span style="color:#676E95;font-style:italic;">-- 设置字符集编码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、查询（Retrieve）</span></span>
<span class="line"><span style="color:#A6ACCD;">show databases; </span><span style="color:#676E95;font-style:italic;">-- 查询所有数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 查询某个数据库的创建语句</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、修改（Update）</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> [databaseName] </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8md4;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、删除（Delete）</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 删除数据库</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">exists</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 存在就删</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、使用</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 查询当前使用的数据库名称</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#A6ACCD;"> [databaseName]; </span><span style="color:#676E95;font-style:italic;">-- 使用数据库</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、创建（Create）</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 创建数据库</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">if</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">not</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">exists</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 不存在则创建</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">character</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> utf8md4; </span><span style="color:#7F848E;font-style:italic;">-- 设置字符集编码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、查询（Retrieve）</span></span>
<span class="line"><span style="color:#ABB2BF;">show databases; </span><span style="color:#7F848E;font-style:italic;">-- 查询所有数据库</span></span>
<span class="line"><span style="color:#ABB2BF;">show </span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 查询某个数据库的创建语句</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、修改（Update）</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">character</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> utf8md4;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、删除（Delete）</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除数据库</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">exists</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 存在就删</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、使用</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">database</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">-- 查询当前使用的数据库名称</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[databaseName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 使用数据库</span></span>
<span class="line"></span></code></pre></div><h4 id="_2、操作表" tabindex="-1">2、操作表 <a class="header-anchor" href="#_2、操作表" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、创建</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName](</span></span>
<span class="line"><span style="color:#A6ACCD;">	[fieldName] [dataType],</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* 1.1、数据类型</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	int整数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	double小数,double(4,1)总长度4，保留1位小数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	date日期，yyyy-MM-dd</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	datetime日期，yyyy-MM-dd HH:mm:ss</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	timestamp时间戳，yyyy-MM-dd HH:mm:ss，赋值null或不赋值时，自动赋值当前系统时间。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	varchar字符串</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、查询</span></span>
<span class="line"><span style="color:#A6ACCD;">show tables; </span><span style="color:#676E95;font-style:italic;">-- 查询当前数据库中所有的表</span></span>
<span class="line"><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> [tableName]; </span><span style="color:#676E95;font-style:italic;">-- 查询某个表结构</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、修改</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] rename </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> [newTableName]; </span><span style="color:#676E95;font-style:italic;">-- 修改表名</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8md4; </span><span style="color:#676E95;font-style:italic;">-- 修改字符集</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> [fieldName] [dataType]; </span><span style="color:#676E95;font-style:italic;">-- 添加列</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] change [fieldName] [newFieldName] [newDataType]; </span><span style="color:#676E95;font-style:italic;">-- 修改列名、类型</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> [fieldName] [newDataType] </span><span style="color:#676E95;font-style:italic;">-- 修改数据类型</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> [fieldName]; </span><span style="color:#676E95;font-style:italic;">-- 删除列</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、删除</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName]; </span><span style="color:#676E95;font-style:italic;">-- 删除表</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">exists</span><span style="color:#A6ACCD;"> [tableName]; </span><span style="color:#676E95;font-style:italic;">-- 存在，就删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5.1建表前</span></span>
<span class="line"><span style="color:#A6ACCD;">id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 给id添加主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5.2建表后</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 给id添加主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5.3删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 删除主键</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6、自增</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6.1、建表前</span></span>
<span class="line"><span style="color:#A6ACCD;">id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> auto_increment </span><span style="color:#676E95;font-style:italic;">-- 给id添加主键约束，并自增</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6.2、建表后</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> auto_increment; </span><span style="color:#676E95;font-style:italic;">-- 添加id自增</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6.3、删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 删除自增</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7、非空</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7.1、建表前</span></span>
<span class="line"><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 非空约束</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7.2、建表后</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 非空约束</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7.3、删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">); </span><span style="color:#676E95;font-style:italic;">-- 删除非空约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8、唯一</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8.1、建表前</span></span>
<span class="line"><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 唯一约束</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8.2、建表后</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 唯一约束</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8.3、删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">); </span><span style="color:#676E95;font-style:italic;">-- 删除唯一约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9、外键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9.1、建表前</span></span>
<span class="line"><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> 外键名 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;">(外键列名) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主表名(主表列名) </span><span style="color:#676E95;font-style:italic;">-- 添加外键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9.2、建表后</span></span>
<span class="line"><span style="color:#A6ACCD;">alert </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> 外键名 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;">(外键列名) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主表名(主表列名); </span><span style="color:#676E95;font-style:italic;">-- 添加外键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9.3、删除</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> 外键名; </span><span style="color:#676E95;font-style:italic;">-- 删除外键关联</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9.4、级联</span></span>
<span class="line"><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> cascade </span><span style="color:#676E95;font-style:italic;">-- 级联更新</span></span>
<span class="line"><span style="color:#C792EA;">on delete cascade</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 级联删除</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、创建</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[dataType]</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 1.1、数据类型</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	int整数</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	double小数,double(4,1)总长度4，保留1位小数</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	date日期，yyyy-MM-dd</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	datetime日期，yyyy-MM-dd HH:mm:ss</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	timestamp时间戳，yyyy-MM-dd HH:mm:ss，赋值null或不赋值时，自动赋值当前系统时间。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	varchar字符串</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、查询</span></span>
<span class="line"><span style="color:#ABB2BF;">show tables; </span><span style="color:#7F848E;font-style:italic;">-- 查询当前数据库中所有的表</span></span>
<span class="line"><span style="color:#C678DD;">desc</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 查询某个表结构</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、修改</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> rename </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[newTableName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 修改表名</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">character</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> utf8md4; </span><span style="color:#7F848E;font-style:italic;">-- 修改字符集</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">add</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[dataType]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 添加列</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> change </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[newFieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[newDataType]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 修改列名、类型</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[newDataType]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 修改数据类型</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除列</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、删除</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除表</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">exists</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 存在，就删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、主键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5.1建表前</span></span>
<span class="line"><span style="color:#ABB2BF;">id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 给id添加主键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5.2建表后</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 给id添加主键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5.3删除</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除主键</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 6、自增</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 6.1、建表前</span></span>
<span class="line"><span style="color:#ABB2BF;">id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">primary key</span><span style="color:#ABB2BF;"> auto_increment </span><span style="color:#7F848E;font-style:italic;">-- 给id添加主键约束，并自增</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 6.2、建表后</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> auto_increment; </span><span style="color:#7F848E;font-style:italic;">-- 添加id自增</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 6.3、删除</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除自增</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 7、非空</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 7.1、建表前</span></span>
<span class="line"><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 非空约束</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 7.2、建表后</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 非空约束</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 7.3、删除</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">-- 删除非空约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 8、唯一</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 8.1、建表前</span></span>
<span class="line"><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">unique</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 唯一约束</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 8.2、建表后</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">unique</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 唯一约束</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 8.3、删除</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">modify</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">-- 删除唯一约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9、外键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9.1、建表前</span></span>
<span class="line"><span style="color:#C678DD;">constraint</span><span style="color:#ABB2BF;"> 外键名 </span><span style="color:#C678DD;">foreign key</span><span style="color:#ABB2BF;">(外键列名) </span><span style="color:#C678DD;">references</span><span style="color:#ABB2BF;"> 主表名(主表列名) </span><span style="color:#7F848E;font-style:italic;">-- 添加外键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9.2、建表后</span></span>
<span class="line"><span style="color:#ABB2BF;">alert </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">add</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">constraint</span><span style="color:#ABB2BF;"> 外键名 </span><span style="color:#C678DD;">foreign key</span><span style="color:#ABB2BF;">(外键列名) </span><span style="color:#C678DD;">references</span><span style="color:#ABB2BF;"> 主表名(主表列名); </span><span style="color:#7F848E;font-style:italic;">-- 添加外键</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9.3、删除</span></span>
<span class="line"><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">foreign key</span><span style="color:#ABB2BF;"> 外键名; </span><span style="color:#7F848E;font-style:italic;">-- 删除外键关联</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9.4、级联</span></span>
<span class="line"><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">update</span><span style="color:#ABB2BF;"> cascade </span><span style="color:#7F848E;font-style:italic;">-- 级联更新</span></span>
<span class="line"><span style="color:#C678DD;">on delete cascade</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 级联删除</span></span>
<span class="line"></span></code></pre></div><h3 id="四、dml" tabindex="-1">四、DML <a class="header-anchor" href="#四、dml" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、添加</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> [tableName]([fieldName],...) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">([value],...);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、删除</span></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> [tableName] [where ?];</span></span>
<span class="line"><span style="color:#F78C6C;">truncate</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> [tableName]; </span><span style="color:#676E95;font-style:italic;">-- 删除表，再创建一个空表。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、修改</span></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> [fieldName]</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">[value],... [where ?];</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、添加</span></span>
<span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;">,...) </span><span style="color:#C678DD;">values</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">[value]</span><span style="color:#ABB2BF;">,...);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、删除</span></span>
<span class="line"><span style="color:#C678DD;">delete</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[where ?]</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">truncate</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">table</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 删除表，再创建一个空表。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、修改</span></span>
<span class="line"><span style="color:#C678DD;">update</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">[value]</span><span style="color:#ABB2BF;">,... </span><span style="color:#E06C75;">[where ?]</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="五、dql" tabindex="-1">五、DQL <a class="header-anchor" href="#五、dql" aria-hidden="true">#</a></h3><h4 id="_1、查询" tabindex="-1">1、查询 <a class="header-anchor" href="#_1、查询" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、查询的格式</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> [fields] </span><span style="color:#676E95;font-style:italic;">-- 字段列表</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> [tables] </span><span style="color:#676E95;font-style:italic;">-- 表名列表</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ? </span><span style="color:#676E95;font-style:italic;">-- 条件列表</span></span>
<span class="line"><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> [fieldName] </span><span style="color:#676E95;font-style:italic;">-- 分组</span></span>
<span class="line"><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> ? </span><span style="color:#676E95;font-style:italic;">-- 分组后的条件</span></span>
<span class="line"><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> [asc/desc] </span><span style="color:#676E95;font-style:italic;">-- 默认升序asc</span></span>
<span class="line"><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> [0,3] </span><span style="color:#676E95;font-style:italic;">-- 分页0开始，3条</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、条件</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">、</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">、</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;">、</span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;">、</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">、</span><span style="color:#89DDFF;">&lt;&gt;/!=</span></span>
<span class="line"><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> ... </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- between 1 and 3 表示[1~3]</span></span>
<span class="line"><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;">(集合) </span><span style="color:#676E95;font-style:italic;">-- in(1,2,3)</span></span>
<span class="line"><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- _单个任意字符、%多个任意字符、[1~3]范围、[^1~3]不在范围</span></span>
<span class="line"><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">、</span><span style="color:#F78C6C;">is not null</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 不可以用 = null</span></span>
<span class="line"><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> 或 &amp;&amp;</span></span>
<span class="line"><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> 或 </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> 或 !</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、排序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> [field] </span><span style="color:#F78C6C;">asc</span><span style="color:#A6ACCD;">, ...;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、聚合函数</span></span>
<span class="line"><span style="color:#A6ACCD;">count </span><span style="color:#676E95;font-style:italic;">-- 计数 一般count(id)主键</span></span>
<span class="line"><span style="color:#A6ACCD;">max </span><span style="color:#676E95;font-style:italic;">-- 最大值</span></span>
<span class="line"><span style="color:#A6ACCD;">min </span><span style="color:#676E95;font-style:italic;">-- 最小值</span></span>
<span class="line"><span style="color:#A6ACCD;">sum </span><span style="color:#676E95;font-style:italic;">-- 合计</span></span>
<span class="line"><span style="color:#A6ACCD;">avg </span><span style="color:#676E95;font-style:italic;">-- 平均值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、分组</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 分组字段或聚合函数 </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> 分组字段;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- where 在分组之前进行限定，不可以进行聚合函数的判断。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- having 在分组之后进行限定，可以进行聚合函数的判断。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6、分页</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> [tableName] </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">-- 0开始，查询3条</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 开始索引 = 当前页码 - 1 * 每页条数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7、去重</span></span>
<span class="line"><span style="color:#F78C6C;">distinct</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8、别名</span></span>
<span class="line"><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 或 空格</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 9、默认值</span></span>
<span class="line"><span style="color:#F78C6C;">ifnull</span><span style="color:#A6ACCD;">(表达式1, 表达式2) </span><span style="color:#676E95;font-style:italic;">-- 判断表达式1为null时，表达式2作为替换</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、查询的格式</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fields]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 字段列表</span></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tables]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 表名列表</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> ? </span><span style="color:#7F848E;font-style:italic;">-- 条件列表</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[fieldName]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 分组</span></span>
<span class="line"><span style="color:#C678DD;">having</span><span style="color:#ABB2BF;"> ? </span><span style="color:#7F848E;font-style:italic;">-- 分组后的条件</span></span>
<span class="line"><span style="color:#C678DD;">order by</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[asc/desc]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 默认升序asc</span></span>
<span class="line"><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[0,3]</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 分页0开始，3条</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、条件</span></span>
<span class="line"><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">、</span><span style="color:#56B6C2;">&lt;</span><span style="color:#ABB2BF;">、</span><span style="color:#56B6C2;">&gt;=</span><span style="color:#ABB2BF;">、</span><span style="color:#56B6C2;">&lt;=</span><span style="color:#ABB2BF;">、</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">、</span><span style="color:#56B6C2;">&lt;&gt;</span><span style="color:#ABB2BF;">/</span><span style="color:#56B6C2;">!=</span></span>
<span class="line"><span style="color:#C678DD;">between</span><span style="color:#ABB2BF;"> ... </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- between 1 and 3 表示[1~3]</span></span>
<span class="line"><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;">(集合) </span><span style="color:#7F848E;font-style:italic;">-- in(1,2,3)</span></span>
<span class="line"><span style="color:#C678DD;">like</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- _单个任意字符、%多个任意字符、[1~3]范围、[^1~3]不在范围</span></span>
<span class="line"><span style="color:#C678DD;">is</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">null</span><span style="color:#ABB2BF;">、</span><span style="color:#C678DD;">is not null</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 不可以用 = null</span></span>
<span class="line"><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> 或 &amp;&amp;</span></span>
<span class="line"><span style="color:#C678DD;">or</span><span style="color:#ABB2BF;"> 或 ||</span></span>
<span class="line"><span style="color:#C678DD;">not</span><span style="color:#ABB2BF;"> 或 !</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、排序</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">order by</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[field]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">asc</span><span style="color:#ABB2BF;">, ...;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、聚合函数</span></span>
<span class="line"><span style="color:#ABB2BF;">count </span><span style="color:#7F848E;font-style:italic;">-- 计数 一般count(id)主键</span></span>
<span class="line"><span style="color:#ABB2BF;">max </span><span style="color:#7F848E;font-style:italic;">-- 最大值</span></span>
<span class="line"><span style="color:#ABB2BF;">min </span><span style="color:#7F848E;font-style:italic;">-- 最小值</span></span>
<span class="line"><span style="color:#ABB2BF;">sum </span><span style="color:#7F848E;font-style:italic;">-- 合计</span></span>
<span class="line"><span style="color:#ABB2BF;">avg </span><span style="color:#7F848E;font-style:italic;">-- 平均值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、分组</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> 分组字段或聚合函数 </span><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> 分组字段;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- where 在分组之前进行限定，不可以进行聚合函数的判断。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- having 在分组之后进行限定，可以进行聚合函数的判断。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 6、分页</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[tableName]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">-- 0开始，查询3条</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 开始索引 = 当前页码 - 1 * 每页条数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 7、去重</span></span>
<span class="line"><span style="color:#C678DD;">distinct</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 8、别名</span></span>
<span class="line"><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> 或 空格</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 9、默认值</span></span>
<span class="line"><span style="color:#C678DD;">ifnull</span><span style="color:#ABB2BF;">(表达式1, 表达式2) </span><span style="color:#7F848E;font-style:italic;">-- 判断表达式1为null时，表达式2作为替换</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="_2、多表" tabindex="-1">2、多表 <a class="header-anchor" href="#_2、多表" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、笛卡尔积</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- a x b 的数据，行数据不重复。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- a表和b表的数据会重复。</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a,b;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a sross </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、内连接</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2.1、隐式内连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a,b </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2.2、显示内连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a </span><span style="color:#F78C6C;">inner join</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、外连接</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3.1、左外连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 以左表为基准的交集部分数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3.2、右外连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a rigth </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 以右表为基准的交集部分数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3.3、全外连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a </span><span style="color:#F78C6C;">full join</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.b_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.id; </span><span style="color:#676E95;font-style:italic;">-- 以左右表为基准的所有交集部分数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、子查询</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a,(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> b); </span><span style="color:#676E95;font-style:italic;">-- 子查询的结果做为一个表</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> score </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> score </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">); </span><span style="color:#676E95;font-style:italic;">-- 子查询的结果作为一个或多个值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、自连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> a a1,a a2; </span><span style="color:#676E95;font-style:italic;">-- 当有字段关联时，可以使用自连接</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、笛卡尔积</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- a x b 的数据，行数据不重复。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- a表和b表的数据会重复。</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a,b;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a sross </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、内连接</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2.1、隐式内连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a,b </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2.2、显示内连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">inner join</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 非空交集部分数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、外连接</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3.1、左外连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">left join</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 以左表为基准的交集部分数据</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3.2、右外连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a rigth </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 以右表为基准的交集部分数据</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3.3、全外连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">full join</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">b_id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 以左右表为基准的所有交集部分数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、子查询</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a,(</span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> b); </span><span style="color:#7F848E;font-style:italic;">-- 子查询的结果做为一个表</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> score </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> score </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> b </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">-- 子查询的结果作为一个或多个值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、自连接</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> a a1,a a2; </span><span style="color:#7F848E;font-style:italic;">-- 当有字段关联时，可以使用自连接</span></span>
<span class="line"></span></code></pre></div><h3 id="六、dcl" tabindex="-1">六、DCL <a class="header-anchor" href="#六、dcl" aria-hidden="true">#</a></h3><h4 id="_1、管理用户" tabindex="-1">1、管理用户 <a class="header-anchor" href="#_1、管理用户" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、添加用户</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> &#39;</span><span style="color:#82AAFF;">用户名</span><span style="color:#A6ACCD;">&#39;@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、删除用户</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、修改用户密码</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 首次设置密码</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your_new_password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 不是第一次设置密码</span></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">新密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> for </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">新密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、忘记密码</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.1、cmd -&gt; net stop mysql # 停止MySQL服务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.2、mysqld --skip-grant-tables或mysqld-nt # 使用无验证方式启动MySQL服务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.3、打开新的cmd窗口，输入mysql登录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.4、use mysql;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.5、update user set password = password(&#39;新的密码&#39;) where user = &#39;root&#39;;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.6、关闭cmd窗口，结束mysqld.exe进程。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4.7、启动mysql服务，使用新密码登录。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、查询用户</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5.1、use mysql; # 切换到mysql数据库</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5.2、select * from user;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 注：%表示可以在任意主机使用用户登录数据库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置字符集</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看</span></span>
<span class="line"><span style="color:#A6ACCD;">show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">character_set%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置客户端字符集</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> character_set_client</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8;</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、添加用户</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">user</span><span style="color:#ABB2BF;"> &#39;</span><span style="color:#61AFEF;">用户名</span><span style="color:#ABB2BF;">&#39;@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;"> identified </span><span style="color:#C678DD;">by</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;密码&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、删除用户</span></span>
<span class="line"><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、修改用户密码</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 首次设置密码</span></span>
<span class="line"><span style="color:#C678DD;">SET</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">PASSWORD</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">PASSWORD</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;your_new_password&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 不是第一次设置密码</span></span>
<span class="line"><span style="color:#C678DD;">update</span><span style="color:#ABB2BF;"> user </span><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">password</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">password</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;新密码&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> user </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">password</span><span style="color:#ABB2BF;"> for </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">password</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;新密码&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、忘记密码</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.1、cmd -&gt; net stop mysql # 停止MySQL服务</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.2、mysqld --skip-grant-tables或mysqld-nt # 使用无验证方式启动MySQL服务</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.3、打开新的cmd窗口，输入mysql登录</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.4、use mysql;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.5、update user set password = password(&#39;新的密码&#39;) where user = &#39;root&#39;;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.6、关闭cmd窗口，结束mysqld.exe进程。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4.7、启动mysql服务，使用新密码登录。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、查询用户</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5.1、use mysql; # 切换到mysql数据库</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5.2、select * from user;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 注：%表示可以在任意主机使用用户登录数据库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 设置字符集</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 查看</span></span>
<span class="line"><span style="color:#ABB2BF;">show variables </span><span style="color:#C678DD;">like</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;character_set%&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 设置客户端字符集</span></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> character_set_client</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">utf8;</span></span>
<span class="line"></span></code></pre></div><h4 id="_2、权限管理" tabindex="-1">2、权限管理 <a class="header-anchor" href="#_2、权限管理" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 1、查询权限</span></span>
<span class="line"><span style="color:#A6ACCD;">show grants for </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2、授予权限</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> 权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 数据库.表名 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3、撤销权限</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> 权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 数据库.表名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主机名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4、权限列表</span></span>
<span class="line"><span style="color:#A6ACCD;">all </span><span style="color:#676E95;font-style:italic;">-- 授权所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5、例子(授予root用户所有sql权限)</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> all privileges </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">root</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">flush privileges;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 选项</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">reload,</span><span style="color:#F78C6C;">shutdown</span><span style="color:#A6ACCD;">,process,</span><span style="color:#F78C6C;">file</span><span style="color:#A6ACCD;">,</span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;">,show databases,super,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> temporary tables,</span></span>
<span class="line"><span style="color:#A6ACCD;">lock tables,</span><span style="color:#F78C6C;">execute</span><span style="color:#A6ACCD;">,replication slaue,replication client,</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view,show view,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> routine,</span><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> routine,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> user,</span></span>
<span class="line"><span style="color:#F78C6C;">event</span><span style="color:#A6ACCD;">,trigger,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> tablespace,</span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">role</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">role</span></span>
<span class="line"><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">option</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> application_password_admin,audit_admin,backup_admin,binlog_admin,binlog_encryption_admin,connection_admin,encryption_key_admin,group_replication_admin,innodb_redo_log_archive,persist_ro_variables_admin,replication_applier,replication_slave_admin,resource_group_admin,resource_group_user,role_admin,seruice_connection_admin,session_vrriables_admin,set_user_id,system_user,system_variables_admin,table_encryption_admin,xa_recover_admin</span></span>
<span class="line"><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">option</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> proxy </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">option</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 1、查询权限</span></span>
<span class="line"><span style="color:#ABB2BF;">show grants for </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 2、授予权限</span></span>
<span class="line"><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> 权限列表 </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">数据库</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">表名</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 3、撤销权限</span></span>
<span class="line"><span style="color:#C678DD;">revoke</span><span style="color:#ABB2BF;"> 权限列表 </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">数据库</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">表名</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;用户名&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 4、权限列表</span></span>
<span class="line"><span style="color:#ABB2BF;">all </span><span style="color:#7F848E;font-style:italic;">-- 授权所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 5、例子(授予root用户所有sql权限)</span></span>
<span class="line"><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> all privileges </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> *.* </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">root</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&quot;%&quot;</span><span style="color:#ABB2BF;"> identified </span><span style="color:#C678DD;">by</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;root&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">flush privileges;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 选项</span></span>
<span class="line"><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">insert</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">update</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">delete</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">reload,</span><span style="color:#C678DD;">shutdown</span><span style="color:#ABB2BF;">,process,</span><span style="color:#C678DD;">file</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">references</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">index</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;">,show databases,super,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> temporary tables,</span></span>
<span class="line"><span style="color:#ABB2BF;">lock tables,</span><span style="color:#C678DD;">execute</span><span style="color:#ABB2BF;">,replication slaue,replication client,</span></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> view,show view,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> routine,</span><span style="color:#C678DD;">alter</span><span style="color:#ABB2BF;"> routine,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> user,</span></span>
<span class="line"><span style="color:#C678DD;">event</span><span style="color:#ABB2BF;">,trigger,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> tablespace,</span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">role</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">drop</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">role</span></span>
<span class="line"><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> *.* </span><span style="color:#98C379;">&#39;root&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">option</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> application_password_admin,audit_admin,backup_admin,binlog_admin,binlog_encryption_admin,connection_admin,encryption_key_admin,group_replication_admin,innodb_redo_log_archive,persist_ro_variables_admin,replication_applier,replication_slave_admin,resource_group_admin,resource_group_user,role_admin,seruice_connection_admin,session_vrriables_admin,set_user_id,system_user,system_variables_admin,table_encryption_admin,xa_recover_admin</span></span>
<span class="line"><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> *.* </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">option</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> proxy </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;root&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">grant</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">option</span></span>
<span class="line"></span></code></pre></div><h3 id="七、数据库设计" tabindex="-1">七、数据库设计 <a class="header-anchor" href="#七、数据库设计" aria-hidden="true">#</a></h3><h4 id="_1、三范式" tabindex="-1">1、三范式 <a class="header-anchor" href="#_1、三范式" aria-hidden="true">#</a></h4><ul><li>第一范式（1NF）：数据库表的每一列都是不可分割的基本数据项。（列数据的不可分割）</li><li>第二范式（2NF）：满足第一范式的前提下，数据库表中的每行必须可以被唯一地区分。（主键）</li><li>第三范式（3NF）：满足第二范式的前提下，数据库表中不包含其他表中已包含的非主关键字信息。（外键）</li></ul><p>反三范式：有时候为了效率，允许冗余或者可以推导出的字段。</p><h4 id="_2、一对一" tabindex="-1">2、一对一 <a class="header-anchor" href="#_2、一对一" aria-hidden="true">#</a></h4><p>例如：人和身份证。</p><p>分析：一个人只有一个身份证，一个身份证只能对应一个人。</p><p>实现：任意一方添加唯一外键指向另一方的主键。</p><blockquote><p>注：一般一对一的情况，字段都在一个表中。</p></blockquote><h4 id="_3、一对多" tabindex="-1">3、一对多 <a class="header-anchor" href="#_3、一对多" aria-hidden="true">#</a></h4><p>例如：部门和员工。</p><p>分析：一个部门有多个员工，一个员工只能对应一个部门。</p><p>实现：在多的一方建立外键，指向一的一方的主键。</p><h4 id="_4、多对多" tabindex="-1">4、多对多 <a class="header-anchor" href="#_4、多对多" aria-hidden="true">#</a></h4><p>例如：学生和课程。</p><p>分析：一个学生可以选择多门课程，一个课程也可以被很多学生选择。</p><p>实现：中间表至少有两个字段，分别指向两张表的主键，联合主键。</p><h3 id="八、事务" tabindex="-1">八、事务 <a class="header-anchor" href="#八、事务" aria-hidden="true">#</a></h3><p>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</p><h4 id="_1、操作" tabindex="-1">1、操作 <a class="header-anchor" href="#_1、操作" aria-hidden="true">#</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">start transaction</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 开启事务</span></span>
<span class="line"><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 回滚事务</span></span>
<span class="line"><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">; </span><span style="color:#676E95;font-style:italic;">-- 提交事务</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#C678DD;">start transaction</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 开启事务</span></span>
<span class="line"><span style="color:#C678DD;">rollback</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 回滚事务</span></span>
<span class="line"><span style="color:#C678DD;">commit</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">-- 提交事务</span></span>
<span class="line"></span></code></pre></div><p><strong>事务提交方式：</strong></p><ul><li>自动提交： <ul><li>MySQL默认自动提交。</li><li>一条DML语句会自动提交一次事务。</li></ul></li><li>手动提交： <ul><li>Oracle默认手动提交。</li><li>需要先开启事务，再提交。</li></ul></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查看事务的默认提交方式</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@autocommit; </span><span style="color:#676E95;font-style:italic;">-- 1表示自动提交，0表示手动提交</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改事务的默认提交方式</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> @@autocommit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 查看事务的默认提交方式</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> @@autocommit; </span><span style="color:#7F848E;font-style:italic;">-- 1表示自动提交，0表示手动提交</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 修改事务的默认提交方式</span></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> @@autocommit </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="_2、四大特性" tabindex="-1">2、四大特性 <a class="header-anchor" href="#_2、四大特性" aria-hidden="true">#</a></h4><ul><li>原子性：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li><li>持久性：当事务提交或回滚后，数据库会持久化的保存数据。</li><li>隔离性：多个事务之间，相互独立。</li><li>一致性：事务操作前后，数据总量不变。</li></ul><h4 id="_3、隔离级别" tabindex="-1">3、隔离级别 <a class="header-anchor" href="#_3、隔离级别" aria-hidden="true">#</a></h4><p>​ 多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</p><p><strong>存在的问题：</strong></p><ul><li>脏读：一个事务，读取到另一个事务中没有提交的数据。</li><li>不可重复读（虚读）：在同一个事务中，两次读取到的数据不一样。</li><li>幻读：一个事务操作数据库表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</li></ul><p><strong>隔离级别：</strong></p><ul><li>read uncommitted：读未提交。 <ul><li>产生的问题：脏读、不可重复读、幻读。</li></ul></li><li>read committed：读已提交（Oracle默认）。 <ul><li>产生的问题：不可重复读、幻读。</li></ul></li><li>repeatable read：可重复读（MySQL默认）。 <ul><li>产生的问题：幻读。</li></ul></li><li>serializable：串行化。 <ul><li>可以解决所有的问题。</li></ul></li></ul><blockquote><p>注：隔离级别从小到大安全性越来越高，但是效率越来越低。</p></blockquote><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查看数据库隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@tx_isolation;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 或 5.7以上版本</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@transaction_isolation;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置数据库隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">isolation</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">level</span><span style="color:#A6ACCD;"> 级别字符串;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置当前会话的隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">isolation</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">level</span><span style="color:#A6ACCD;"> 级别字符串;</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 查看数据库隔离级别</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> @@tx_isolation;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 或 5.7以上版本</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> @@transaction_isolation;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 设置数据库隔离级别</span></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">global</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">transaction</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">isolation</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">level</span><span style="color:#ABB2BF;"> 级别字符串;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 设置当前会话的隔离级别</span></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">session</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">transaction</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">isolation</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">level</span><span style="color:#ABB2BF;"> 级别字符串;</span></span>
<span class="line"></span></code></pre></div>`,67),e=[o];function t(c,r,y,i,C,B){return n(),a("div",null,e)}const F=s(p,[["render",t]]);export{D as __pageData,F as default};
